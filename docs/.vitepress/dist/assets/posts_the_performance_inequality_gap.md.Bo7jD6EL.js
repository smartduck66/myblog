import{_ as n,c as a,m as e,a as s,t as r,V as o,o as i,av as u}from"./chunks/framework.DyooxGaQ.js";const C=JSON.parse(`{"title":"Le foss√© de l'in√©galit√© des performances","description":"","frontmatter":{"title":"Le foss√© de l'in√©galit√© des performances","date":"2023-02-26T00:00:00.000Z","category":["javascript"],"tag":["performance"],"archive":false},"headers":[],"relativePath":"posts/the_performance_inequality_gap.md","filePath":"posts/the_performance_inequality_gap.md"}`),l={name:"posts/the_performance_inequality_gap.md"},d={id:"frontmatter-title",tabindex:"-1"},p=e("a",{class:"header-anchor",href:"#frontmatter-title","aria-label":'Permalink to "{{ $frontmatter.title }}"'},"‚Äã",-1),c={id:"frontmatter-date-substring-8-10-frontmatter-date-substring-5-7-frontmatter-date-substring-0-4",tabindex:"-1"},m=e("br",null,null,-1),f=e("br",null,null,-1),g=e("a",{class:"header-anchor",href:"#frontmatter-date-substring-8-10-frontmatter-date-substring-5-7-frontmatter-date-substring-0-4","aria-label":'Permalink to ":calendar: {{ $frontmatter.date.substring(8,10) }}/{{ $frontmatter.date.substring(5,7) }}/{{ $frontmatter.date.substring(0,4) }}<br><br>"'},"‚Äã",-1),q=o('<br><p><img src="'+u+'" alt="IMG" title="Hi√©rarchie UX"><br><br> Cette pyramide a √©t√© pr√©sent√©e lors de la conf√©rence <a href="https://web.dev/web-performance-made-easy/" target="_blank" rel="noreferrer">Google I/O de 2018</a>. Elle d√©montrait que la vitesse de chargement d&#39;une page √©tait (et reste toujours) le souci <strong>num√©ro 1</strong> de tout utilisateur du Web, qu&#39;il soit sur un PC connect√© en fibre optique ou sur un mobile surfant en 3G.</p><p>Fin 2022, <a href="https://infrequently.org/about-me/" target="_blank" rel="noreferrer">Alex Russell</a> qui a travaill√© 13 ans sur Chrome et maintenant sur Edge chez Microsoft, faisait le point sur le <em>Web performance inegality gap</em> √† la conf√©rence <a href="https://infrequently.org/2022/12/performance-baseline-2023/" target="_blank" rel="noreferrer">performance.now()</a> d&#39;Amsterdam. Il argue que &quot;le digital √©tant devenu la nouvelle norme de notre Soci√©t√©, y acc√©der lentement est un facteur d&#39;exclusion&quot;. Ce constat a d&#39;ailleurs √©t√© dress√© il y a plus de 20 ans en France, pour ceux qui poss√©dait une liaison ADSL &quot;poussive&quot; (car trop √©loign√©s du fameux r√©partiteur) ou qui, dor√©navant, n&#39;ont pas acc√®s √† une connexion fibre optique...</p><p>Mais la d√©monstration d&#39;Alex Russell prend le probl√®me par l&#39;autre bout, c&#39;est-√†-dire par le <strong>contenu auquel on souhaite acc√©der</strong>. Et l√†, les chiffres sont sans appel : &quot;Pour que <a href="https://support.speedcurve.com/docs/performance-for-product-managers#75th-percentile" target="_blank" rel="noreferrer">75%</a> des utilisateurs mondiaux puissent interagir avec une page Web en moins de 5 secondes lors de son premier chargement, son contenu ne doit pas exc√©der plus de <strong>150 ko</strong> de HTML/CSS/fontes et <strong>300 √† 350 ko</strong> de Javascript (gzipped). Le probl√®me est que les sites Web continuent d&#39;envoyer davantage de scripts √† plus de 80% des utilisateurs mondiaux, ce qui contribue √† augmenter le foss√© entre ceux qui poss√®dent la bonne technologie (PC, mobile et r√©seau de qualit√©) et ceux qui n&#39;ont pas cette chance. C&#39;est donc une crise √©thique pour le <em>front-end</em>.&quot;</p><h4 id="tout-le-monde-ne-peut-pas-s-offrir-un-iphone-14-ou-un-desktop-dote-d-un-processeur-16-coeurs" tabindex="-1">Tout le monde ne peut pas s&#39;offrir un iPhone 14 ou un <em>desktop</em> dot√© d&#39;un processeur 16 coeurs <a class="header-anchor" href="#tout-le-monde-ne-peut-pas-s-offrir-un-iphone-14-ou-un-desktop-dote-d-un-processeur-16-coeurs" aria-label="Permalink to &quot;Tout le monde ne peut pas s&#39;offrir un iPhone 14 ou un *desktop* dot√© d&#39;un processeur 16 coeurs&quot;">‚Äã</a></h4><p>Alex Russell se sert de la t√©l√©m√©trie du navigateur Edge pour constater que la moiti√© de ses usagers poss√®dent un PC <em>low-end</em> :</p><ul><li>Disque dur (pas de SSD, plus rapide)</li><li>CPU avec 2 √† 4 coeurs</li><li>4 Go de m√©moire vive ou moins</li></ul><p>Concernant le d√©bit moyen de la connexion Internet fixe, il reprend les chiffres du profil &quot;c√¢ble&quot; de <a href="https://www.webpagetest.org" target="_blank" rel="noreferrer">WebPageTest</a>, soit <strong>5 Mbps</strong> (latence de 25 ms), avec un chiffre encore plus mauvais pour les zones rurales.</p><p>C√¥t√© Mobile, l&#39;√©quipement <em>moyen</em> repr√©sentatif poss√©de les caract√©ristiques suivantes (ex : Samsung Galaxy A50 ou Nokia G11) :</p><ul><li>Processeur ARM 8 coeurs, lent, peu de cache m√©moire</li><li>4 Go de m√©moire vive</li><li>4G</li></ul><p>Le r√©seau mobile d&#39;acc√®s, quant √† lui, fournit en moyenne une bande passante de <strong>9 Mbps</strong> (latence de 170 ms).</p><h4 id="le-fosse-de-l-inegalite-des-performances-s-accroit" tabindex="-1">Le foss√© de l&#39;in√©galit√© des performances s&#39;accroit <a class="header-anchor" href="#le-fosse-de-l-inegalite-des-performances-s-accroit" aria-label="Permalink to &quot;Le foss√© de l&#39;in√©galit√© des performances s&#39;accroit&quot;">‚Äã</a></h4><p>Ces chiffres doivent nous faire r√©fl√©chir. Que l&#39;on soit d√©veloppeur, designer, Product Manager ou sponsor d&#39;un produit digital. Encore plus quand l&#39;on intervient dans la sph√®re publique. En effet, la plupart des services publics, dans le Monde, sont ou vont √™tre accessibles digitalement. Songez √† la complexit√© de d√©clarer ses imp√¥ts en &quot;mode papier&quot;, depuis quelques ann√©es.</p><p>Alex Russell nous donne un exemple √©difiant d&#39;une exp√©rience r√©cente avec CA.gov, le site des services publics de l&#39;Etat de Californie o√π il r√©side. Il constate d√©but novembre sa subite lenteur, analyse qu&#39;il est d√©velopp√© avec React et Next.js et &quot;toute une panoplie d&#39;horreurs modernes&quot;. Il en avertit les responsables qui d√©cident de revenir promptement √† un d√©veloppement <em>HTML-first</em>, ce qui am√©liore drastiquement les performances de ce site vital pour les quelques 40 millions de californiens.</p><h4 id="notre-aveuglement-a-recourir-systematiquement-a-un-framework-javascript" tabindex="-1">Notre aveuglement (?) √† recourir syst√©matiquement √† un framework Javascript <a class="header-anchor" href="#notre-aveuglement-a-recourir-systematiquement-a-un-framework-javascript" aria-label="Permalink to &quot;Notre aveuglement (?) √† recourir syst√©matiquement √† un framework Javascript&quot;">‚Äã</a></h4><p>Ni une, ni deux, Alex Russell embraye sur un article qui a fait couler beaucoup d&#39;encre depuis quelques semaines. En effet, <a href="https://infrequently.org/2023/02/the-market-for-lemons/" target="_blank" rel="noreferrer">The market for Lemons</a> est une charge en r√®gle contre le &quot;trop-plein&quot; de Javascript en g√©n√©ral, et les frameworks JS en particulier. Ce n&#39;est certes pas nouveau et de nombreuses voix s&#39;√©l√®vent depuis plusieurs ann√©es contre la &quot;tyrannie&quot; des <em>Single Page Applications</em> qui encombrent le client et ont <strong>d√©tourn√© le Web de ses fondamentaux</strong>. Mais, cette fois, notre s√©millant architecte va beaucoup plus loin et parle &quot;d&#39;une d√©cennie perdue&quot; et quasiment d&#39;un complot de ces vendeurs de solutions. Notons tout de m√™me que quelques outils plus <em>light</em> trouvent gr√¢ce √† ses yeux tels que Vue, Svelte ou encore Eleventy.</p><p>Sans prendre parti dans ce d√©bat tr√®s clivant, il est bon de rappeler quelques faits :</p><ul><li>La r√©partition des t√¢ches entre <strong>client et serveur</strong> est aussi vieux que l&#39;informatique. L&#39;antique terminal IBM √©tait &quot;b√™te comme ses pieds&quot;, puis l&#39;ordinateur personnel est venu bousculer le <em>statu quo</em> √† partir de 1975, suivi du d√©ploiement massif des applications client &quot;lourd&quot;/serveur dans les ann√©es 80/90... pour revenir √† plus &quot;d&#39;√©quit√©&quot; depuis le d√©but de ce si√®cle avec la d√©ferlante des architectures Web. Bref, tout est affaire d&#39;√©quilibre sur les 3 &quot;morceaux&quot; immuables de la cha√Æne que sont le client, le r√©seau et le serveur.</li><li>Choisir un framework, des composants sur √©tag√®re ou n&#39;importe quelle librairie qui vous permet d&#39;am√©liorer votre productivit√© de d√©veloppeur n&#39;est pas d√©raisonnable... √† partir du moment <strong>o√π vous maitrisez suffisamment les sous-jacents</strong> pour prendre une d√©cision √©clair√©e. Utiliser un framework JS qui facilite la construction de composants Web sans savoir bien coder en HTML, CSS et Javascript, c&#39;est comme conduire sans permis. Cela va &quot;rouler&quot; jusqu&#39;√† la sortie de route, i.e. l&#39;application trop lente, impossible √† maintenir.</li><li>Tout d√©veloppeur doit savoir quel outil utiliser pour r√©pondre au besoin exprim√©. Pourquoi utiliser Angular, React ou Vue quand une solution <em>Jamstack</em> telle qu&#39;Astro ou VitePress suffit ?</li><li>M√™me si HTML et CSS ne sont pas consid√©r√©s comme des langages de programmation, ils ont fortement √©volu√© depuis 15 ans. Nombre de sites Web ne n√©cessitent pas d&#39;utiliser massivement Javascript. Il suffit, par contre, de faire l&#39;effort <strong>d&#39;√©tudier un peu plus</strong> ces &quot;langages d√©claratifs&quot; afin de mieux en tirer parti... et d&#39;obtenir des sites plus l√©gers.</li><li>Dans la m√™me veine, la plateforme Web (i.e. les navigateurs) √©volue r√©guli√®rement en offrant de nouvelles API qui peuvent remplacer avantageusement des librairies externes. Fetch ou la <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Authentication_API" target="_blank" rel="noreferrer">Web Authentication API</a> en sont de bons exemples. <strong>#usetheplatform</strong></li></ul><h4 id="conclusion" tabindex="-1">Conclusion <a class="header-anchor" href="#conclusion" aria-label="Permalink to &quot;Conclusion&quot;">‚Äã</a></h4><p>Le navigateur NCSA Mosaic f√™te ses 30 ans. Il a en effet √©t√© publi√© en 1993, alors que le World Wide Web d√©velopp√© par le CERN ne comptait que 200 sites, 3 ans apr√®s son lancement. Cette r√©volution portait d√©j√† en son sein &quot;le foss√© de l&#39;in√©galit√© des performances&quot;, en partant du fait que le Monde entier allait pouvoir se connecter √† Internet et b√©n√©ficier de ses multiples apports... <strong>mais sans poss√©der</strong> justement les m√™mes moyens d&#39;acc√®s.</p><p>Cette situation n&#39;est pas pr√™te de s&#39;am√©liorer, comme Alex Russell l&#39;a abondamment d√©montr√©e, statistiques √† l&#39;appui. La bonne nouvelle est que tous les outils existent pour respecter la limite des quelques 500 ko par page. Je vous encourage d&#39;ailleurs √† parcourir le billet <a href="/posts/lighthouse.html">Lighthouse</a> que j&#39;avais commis en janvier dernier üòâ</p><p><a href="/">&gt; Accueil</a> <a href="/articles.html">&gt; Tous les articles</a></p>',22);function b(t,h,v,_,x,k){return i(),a("div",null,[e("h1",d,[s(r(t.$frontmatter.title)+" ",1),p]),e("h5",c,[s("üìÜ "+r(t.$frontmatter.date.substring(8,10))+"/"+r(t.$frontmatter.date.substring(5,7))+"/"+r(t.$frontmatter.date.substring(0,4)),1),m,f,s(),g]),q])}const P=n(l,[["render",b]]);export{C as __pageData,P as default};
