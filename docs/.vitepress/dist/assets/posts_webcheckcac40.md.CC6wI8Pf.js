import{_ as e,c as n,m as s,a as t,t as a,V as l,o as p,aF as h,aG as r,aH as k}from"./chunks/framework.DyooxGaQ.js";const D=JSON.parse(`{"title":"WebCheck'CAC40, la refonte de Speedlify'CAC40","description":"","frontmatter":{"title":"WebCheck'CAC40, la refonte de Speedlify'CAC40","date":"2024-02-03T00:00:00.000Z","category":["projets"],"tag":["Vue.js"],"archive":false},"headers":[],"relativePath":"posts/webcheckcac40.md","filePath":"posts/webcheckcac40.md"}`),o={name:"posts/webcheckcac40.md"},d={id:"frontmatter-title",tabindex:"-1"},E=s("a",{class:"header-anchor",href:"#frontmatter-title","aria-label":'Permalink to "{{ $frontmatter.title }}"'},"‚Äã",-1),c={id:"frontmatter-date-substring-8-10-frontmatter-date-substring-5-7-frontmatter-date-substring-0-4",tabindex:"-1"},g=s("br",null,null,-1),u=s("br",null,null,-1),y=s("a",{class:"header-anchor",href:"#frontmatter-date-substring-8-10-frontmatter-date-substring-5-7-frontmatter-date-substring-0-4","aria-label":'Permalink to ":calendar: {{ $frontmatter.date.substring(8,10) }}/{{ $frontmatter.date.substring(5,7) }}/{{ $frontmatter.date.substring(0,4) }}<br><br>"'},"‚Äã",-1),m=l('<br><p><img src="'+h+'" alt="IMG" title="WebCheck&#39;CAC40"><br><br> Les travaux de Zach Leatherman, le cr√©ateur entre autres du SSG 11ty, m&#39;avaient permis d&#39;impl√©menter l&#39;ann√©e derni√®re le projet <a href="https://speedlifycac40.andretonic.fr/" target="_blank" rel="noreferrer">Speedlify</a>. La mesure syst√©matique des indicateurs Google Lighthouse sur les embl√©matiques sites institutionnels du CAC40 ont √©t√© fort instructifs : des ressources financi√®res illimit√©es ne sont h√©las pas toujours synonymes de qualit√©. Seulement <strong>7 √† 8</strong> des plus importantes soci√©t√©s fran√ßaises parviennent √† d√©passer la note de 360 sur 400 (= 90 x 4 indicateurs) et, en g√©n√©ral, <strong>une seule</strong> d√©passe les 390 sur 400. Evidemment, on peut toujours r√©torquer que Lighthouse n&#39;est pas <em>l&#39;alpha et l&#39;om√©ga</em> de la mesure de la performance d&#39;un site Web et c&#39;est probablement vrai. Mais ces outils de mesure ont d√©j√† 5 ans, s&#39;am√©liorent sans cesse, sont plut√¥t bien document√©s et tout d√©veloppeur, s&#39;il s&#39;en donne la peine, peut <strong>auditer et am√©liorer la performance globale de son site</strong>. A fortiori, les √©quipes internes ou les agences digitales qui r√©alisent les applications Web des g√©ants √©conomiques fran√ßais...</p><p>Le dernier <strong>batch</strong> de mesures du 2 f√©vrier nous fournit le quint√© suivant :</p><ul><li>ArcelorMittal : 392 sur 400</li><li>Vinci : 378 sur 400</li><li>Edenred : 371 sur 400</li><li>Saint-Gobain : 366 sur 400</li><li>Pernod-Ricard : 363 sur 400</li></ul><p>Je vous laisse d√©couvrir les mauvais √©l√®ves en allant naviguer sur le <a href="https://webcheckcac40.andretonic.fr/" target="_blank" rel="noreferrer">site</a> üòâ</p><p>Pourquoi avoir refondu Speedlify ? Surtout pour avoir totalement la main sur le code de l&#39;application. J&#39;ai donc repris le module <em>performance-leaderboard</em> de Zach et b√¢ti une application en Vue.js, mon framework Javascript de pr√©dilection. Et voici, WebCheck&#39;CAC40 !</p><p>Un tableau collationne les <strong>4 m√©triques principales issues de Lighthouse</strong> (performance, accessibilit√©, Bonnes pratiques, SEO) ainsi que la r√©partition du <strong>poids des pages</strong> audit√©es. Un clic sur l&#39;une des lignes du tableau vous permet de r√©cup√©rer des indicateurs encore plus fins, comme le <strong>FCP, le SI, le LCP, le TBT ou encore le CLS</strong>. En sus, un affichage de <strong>l&#39;empreinte carbone</strong> de la page est propos√©e, via Website Carbon Calculator, en fonction de la disponibilit√© de l&#39;API. Enfin, un graphique historique pr√©sente l&#39;√©volution de la performance globale dans le temps, pour chacune des valeurs du CAC40.</p><h3 id="l-architecture-de-webcheck-cac40" tabindex="-1">L&#39;architecture de WebCheck&#39;CAC40 <a class="header-anchor" href="#l-architecture-de-webcheck-cac40" aria-label="Permalink to &quot;L&#39;architecture de WebCheck&#39;CAC40&quot;">‚Äã</a></h3><p>J&#39;ai souhait√© capitaliser sur ma petite expertise de Vue.js, en continuant √† faire confiance √† ce framework, d√©cid√©ment toujours aussi facile d&#39;acc√®s. Cette application purement <em>front</em> s&#39;appuie sur les modules suivants, d√©j√† utilis√©s par exemple dans <a href="https://jazzy-florentine-dc0c2d.netlify.app/" target="_blank" rel="noreferrer">botanical</a> ou <a href="https://kiko.andretonic.fr/" target="_blank" rel="noreferrer">kiko</a> :</p><ul><li><strong>Vue Router</strong> : npm i vue-router@4</li><li><strong>VueUse</strong> : npm i @vueuse/core (utilitaires)</li><li><strong>PrimeVue</strong> : npm i primevue (composants graphiques)</li><li><strong>Pinia</strong> : npm i pinia (gestion des √©tats)</li><li><strong>Sharp</strong> : npm install sharp (package utilis√© pour transformer en masse les images png/jpg en webp)</li><li><strong>eCharts/vue-echarts</strong> : npm i echarts vue-echarts (graphiques)</li></ul><p>Le r√©pertoire source central de l&#39;application est d√©compos√© en 4 sections assez classiques : assets, components, router, views. <br></p><p><img src="'+r+`" alt="IMG" title="Architecture de WebCheck&#39;CAC40"><br><br> Le script <em>main.ts</em> instancie <em>App.vue</em>, qui lance le <em>Masthead</em> puis <em>Mesures.vue</em> qui pr√©sentent les derniers chiffres. Les donn√©es sont calcul√©es directement sur mon PC, en local, via un script <em>node.js</em> qui appelle le module <em>performance-leaderboard</em> et cr√©e des fichiers <em>json</em> stock√©s dans le r√©pertoire /public. Cette g√©n√©ration <em>pseudo</em>-statique permet d&#39;√©viter une base de donn√©es, chaque fichier de mesures ne pesant que <strong>27 ko</strong> pour les 39 valeurs du CAC40 (Hermes est toujours aussi peu r√©ceptif √† la mesure...). Je vais tenter de lancer ce script <strong>hebdomadairement</strong> pour disposer de statistiques r√©guli√®res.</p><p>Comme indiqu√© plus haut, cliquer sur l&#39;une des lignes du tableau permet d&#39;afficher une pop-up qui est en fait un composant Vue.js nomm√© <em>Teleport</em>. Ce composant natif permet de &quot;t√©l√©porter&quot; une partie du template d&#39;un composant dans un n≈ìud du DOM, qui existe en dehors de la hi√©rarchie du DOM de ce composant. Voici le code qui devrait vous permettre de mieux comprendre :</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Teleport</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> to</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;body&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> v-if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;open&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;modal&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> @click=&quot;open</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> =</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> false&quot;&gt;</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        &lt;img</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> src</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;../assets/img/close.png&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Close&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;FlexWrapper_modal&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sous-titre2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;{{ URL }} : KPIs &amp; mix poids page ({{ store.milliers_2.format(page_weight / </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) }} Mo)&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;my_grid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;c-item-1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">a</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> target</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;_blank&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://developer.chrome.com/docs/lighthouse/performance/first-contentful-paint&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> aria-label</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;FCP&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;FCP&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; (First Contentful Paint) : &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;c-item-2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;{{ store.milliers_2.format(FCP) + </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot; s&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;c-item-3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> :style=&quot;{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;background-color&#39;</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">:</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> FCP_color,</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> color:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FCP_color</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> }&quot;&gt;FCP&lt;/div&gt;</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">            ...</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">          &lt;/div&gt;</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        &lt;/div&gt;</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        &lt;Chart</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> v-bind</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{ values: weights, width: 320, height: 280, color: &#39;#0a94a8&#39; }&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;legend&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;Poids : images, scripts, document, fontes, styles, modules tierce partie&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Teleport</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>Je trouve ce composant tr√®s pratique au b√©mol pr√®s qu&#39;il peut rapidement &quot;gonfler&quot; le module javascript sous forme de &quot;code non utilis√©&quot; et, donc, d√©grader l&#39;indicateur de performance de Lighthouse.</p><p>Vous avez peut-√™tre remarqu√© l&#39;exposition d&#39;un composant <strong>Chart</strong> dans le code ci-dessus. En fait, il appelle le code suivant, qui permet de construire un graphique tr√®s simplement :</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">import { use } from &quot;echarts/core&quot;;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">import { UniversalTransition } from &quot;echarts/features&quot;;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">import { CanvasRenderer } from &quot;echarts/renderers&quot;;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">import { PieChart } from &quot;echarts/charts&quot;;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">import VChart from &quot;vue-echarts&quot;;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">import { ref, defineComponent } from &quot;vue&quot;;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">use([PieChart, CanvasRenderer, UniversalTransition]);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">export default defineComponent({</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // A type helper for defining a Vue component with type inference</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Chart&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  components: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    VChart,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  props: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;values&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;width&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;height&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;color&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  setup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(props) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    const option </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      series: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;pie&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          data: props.values,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    const init_options </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      width: props.width,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      height: props.height,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    return { option, init_options };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">v-chart</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;chart&quot;</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> :option=&quot;option&quot;</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"> :init-options=&quot;init_options&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> scoped</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.chart {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  height: 100vh;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>Apr√®s avoir import√© les bons modules <a href="https://echarts.apache.org/en/index.html" target="_blank" rel="noreferrer">d&#39;Apache Echarts</a>, il suffit de lui demander le graphique √† tracer (<em>type: &quot;pie&quot;</em>) puis de lui passer les valeurs (<em>data: props.values</em>) üòä Vous avez un second graphique, <a href="https://webcheckcac40.andretonic.fr/historique" target="_blank" rel="noreferrer">historique</a> celui-ci, qui deviendra plus expressif le temps passant.</p><h3 id="conclusion" tabindex="-1">Conclusion <a class="header-anchor" href="#conclusion" aria-label="Permalink to &quot;Conclusion&quot;">‚Äã</a></h3><p>Pour terminer, un petit mot sur la mesure des indicateurs Lighthouse de cette application : <br></p><p><img src="`+k+'" alt="IMG" title="Lighthouse"><br><br> Evidemment, il est beaucoup plus simple d&#39;obtenir ce genre de score sur une petite application, m√™me si gagner ne serait-ce qu&#39;un point n&#39;est pas toujours si simple. J&#39;ai du passer plusieurs heures pour <em>splitter</em> proprement mes modules javascript (chargement de composants dynamiques), travailler les couleurs pour que le contraste ne soit pas trop faible, appliquer de judicieux <em>async</em> pour que le chargement des diff√©rents fichiers de l&#39;application soit le plus parall√©lis√© possible... ou encore faire maigrir le th√®me fourni par PrimeVue de <strong>174 √† 26 ko</strong> en ne conservant que le code CSS v√©ritablement n√©cessaire aux composants graphiques utilis√©s (Datatable, Menu, Dropdown, Card).</p><p>Et la suite, me direz-vous ? Je souhaite am√©liorer WebCheck&#39;CAC40 tout au long de cette ann√©e en lui adjoignant, par exemple, une section pr√©sentant des analyses plus <strong>profondes</strong> des sites mesur√©s. A tr√®s vite, donc üòÉ</p><p>Retrouvez tous mes projets personnels, ainsi que WebCheck&#39;CAC40, dans cette <a href="/projets.html">section</a> de mon blog.</p><p><a href="/">&gt; Accueil</a> <a href="/articles.html">&gt; Tous les articles</a></p>',24);function F(i,f,C,q,b,v){return p(),n("div",null,[s("h1",d,[t(a(i.$frontmatter.title)+" ",1),E]),s("h5",c,[t("üìÜ "+a(i.$frontmatter.date.substring(8,10))+"/"+a(i.$frontmatter.date.substring(5,7))+"/"+a(i.$frontmatter.date.substring(0,4)),1),g,u,t(),y]),m])}const B=e(o,[["render",F]]);export{D as __pageData,B as default};
